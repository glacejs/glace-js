<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"cli.js.html":{"id":"cli.js.html","title":"Source: cli.js","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Source: cli.js &quot;use strict&quot;; /** * Contains functions to execute tests via command line interface. * * @module */ require(&quot;glace-core/lib/help&quot;); var run = require(&quot;./run&quot;); /** * Runs `GlaceJS` in CLI. * * @function */ module.exports.run = () =&gt; run(process.exit); × Search results Close "},"globals.js.html":{"id":"globals.js.html","title":"Source: globals.js","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Source: globals.js &quot;use strict&quot;; /** * Contains global framework functions and helpers. * * @module */ var glaceSession = session; global.session = (name, ctx, fixtures, func) =&gt; { if (name instanceof Function) { func = name; name = undefined; }; if (ctx instanceof Function) { func = ctx; ctx = undefined; }; if (fixtures instanceof Function) { func = fixtures; fixtures = undefined; }; fixtures = fixtures || []; if (CONF.web.use) fixtures.push(fxKillWebdriver); if (CONF.xvfb.use) fixtures.push(fxXvfb); if (CONF.web.use &amp;&amp; !CONF.webdriver.host) fixtures.push(fxSelenium); if (CONF.proxy.http) fixtures.push(fxHttpProxy); if (CONF.proxy.global) fixtures.push(fxGlobalProxy); if (CONF.web.use) fixtures.push(fxWebdriver); if (CONF.web.use) fixtures.push(fxBrowser); glaceSession(name, ctx, fixtures, func); }; × Search results Close "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Source: index.js &quot;use strict&quot;; /** * `GlaceJS` main module. * * @module * * @prop {object} config - {@link module:config|Config} module. * @prop {object} error - {@link module:error|Error} module. * @prop {object} Page - {@link module:page/index|Page} module. * @prop {object} reporter - {@link module:reporter/index|Reporter} module. * @prop {object} run - {@link module:run|run} module. * @prop {object} Steps - {@link module:steps|Steps} module. */ var config, error, Page, reporter, run, Steps; Object.defineProperties(exports, { /** * @type {GlaceConfig} */ config: { get: function() { config = config || require(&quot;glace-core&quot;).config; return config; }, }, error: { get: function() { error = error || require(&quot;glace-core&quot;).error; return error; }, }, /** * @type {Page} */ Page: { get: function() { Page = Page || require(&quot;glace-core&quot;).Page; return Page; }, }, /** * @type {GlaceReporter} */ reporter: { get: function() { reporter = reporter || require(&quot;glace-core&quot;).reporter; return reporter; }, }, /** * @type {run} */ run: { get: function() { run = run || require(&quot;./run&quot;); return run; }, }, /** * @type {Steps} */ Steps: { get: function() { Steps = Steps || require(&quot;glace-core&quot;).Steps; return Steps; }, }, }); × Search results Close "},"run.js.html":{"id":"run.js.html","title":"Source: run.js","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Source: run.js &quot;use strict&quot;; /** * Runs tests. * * @module */ var path = require(&quot;path&quot;); var glace = require(&quot;glace-core&quot;); var CONF = glace.config; CONF.preloads.push(path.resolve(__dirname, &quot;globals.js&quot;)); module.exports = glace.run; × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Modules × Search results Close "},"tutorials.list.html":{"id":"tutorials.list.html","title":"Tutorials","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Tutorials × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Glace (fr. glacé — ice, frozen) is a cold drink based on coffee with addition of ice cream. GlaceJS is a functional testing framework based on mochajs. Features Cross-platform Uses mochajs as test runner Has own tests and reports system Oriented to complex functional scenarios Supports multiple independent verifications (chunks) inside a test Supports parameterization inside and outside of test Has built-in mechanism to retry failed tests or chunks Has built-in reporters to terminal, report.log file and TestRail Launches selenium server if external selenium address isn't specified Supports STEPS architecture and Page Object Pattern Has mechanism to compare two images Has mechanism to search one image inside another image Supports video capture of executed tests Supports xvfb virtual display and video capture of it Includes two proxies: simple http proxy and global transparent proxy Supports a set of middlewares for both proxies Includes middleware to cache server responses Includes middleware to manage proxy responses speed Includes middleware to gather server responses information Supports JSON config for CLI options Supports extending default config with user config Binary software may be used java for selenium server usage; chrome browser for web tests; imagemagick (unix only) for images comparison (on windows will be installed together with framework); avconv (linux only) for video capture. On windows ffmpeg is used which will be installed together with framework. On macOS isn't implemented still; compiler for native nodejs modules. On windows may be installed with npm i -g windows-build-tools; How to installUse npm: npm i glacejsOr clone repository: git clone https://github.com/schipiga/glacejs.git cd glacejs npm iHow to launch testsIf you clone repository and install it as developer, you may find a plenty of examples with commands how to launch them. After npm installation you may use command glace to launch tests. Use glace -h to get info about available options, or read about CLI options in documentation. How to write testsPlease look through examples to see how to write tests. In documentation also you may find description of all supported steps. Bugs and feedbacksPlease fill free to create an issue on github. × Search results Close "},"module-lib_cli.html":{"id":"module-lib_cli.html","title":"Module: lib/cli","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Module: lib/cli Contains functions to execute tests via command line interface. Source: cli.js, line 2 Methods &lt;static&gt; run() Runs GlaceJS in CLI. Source: cli.js, line 16 × Search results Close "},"module-lib_globals.html":{"id":"module-lib_globals.html","title":"Module: lib/globals","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Module: lib/globals Contains global framework functions and helpers. Source: globals.js, line 2 × Search results Close "},"module-lib_index.html":{"id":"module-lib_index.html","title":"Module: lib/index","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Module: lib/index GlaceJS main module. Properties: Name Type Description config object Config module. error object Error module. Page object Page module. reporter object Reporter module. run object run module. Steps object Steps module. Source: index.js, line 2 Members &lt;inner&gt; config :GlaceConfig Type: GlaceConfig Source: index.js, line 21 &lt;inner&gt; Page :Page Type: Page Source: index.js, line 36 &lt;inner&gt; reporter :GlaceReporter Type: GlaceReporter Source: index.js, line 45 &lt;inner&gt; run :run Type: run Source: index.js, line 54 &lt;inner&gt; Steps :Steps Type: Steps Source: index.js, line 63 × Search results Close "},"module-lib_run.html":{"id":"module-lib_run.html","title":"Module: lib/run","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Module: lib/run Runs tests. Source: run.js, line 2 × Search results Close "},"tutorial-conftest.html":{"id":"tutorial-conftest.html","title":"Tutorial: How to use conftest.js","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions How to use conftest.js File conftest.js is used to make some configuration before tests loading. It may be located with tests file or inside each folder containing tests files. In order to make some functions available inside a test, you may use global namespace: // conftest.js global.someFunc = () =&gt; console.log(&quot;hello world&quot;);test(&quot;My test&quot;, () =&gt; { chunk(() =&gt; someFunc()); }); × Search results Close "},"tutorial-console-args.html":{"id":"tutorial-console-args.html","title":"Tutorial: Command line arguments","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Command line arguments GlaceJS supports follow command line arguments: &lt;paths&gt; (optional) - Sequence of file or folder paths, where tests are located. For example, glace myTests.js or glace path/to/tests-folder. In folder it loads files with tests recursively. If file with tests is not specified directly, it loads files with prefix test and extension .js only. If argument is not specified, it looks inside folder tests in current work directory. --web (optional) - Activates steps for web testing in browser via selenium. If option is specified, selenium server and browser will launched automatically on session begin and will be stopped at session end. --dont-install-drivers (optional) - Don't install selenium webdrivers on session start. --platform &lt;type&gt; (optional) - Platfrom type. Supported values are pc, android, ios. Default value is pc. For example, --platform android. --browser &lt;name&gt; (optional) - Browser name. Default value is specific for platform: chrome for pc, chrome for android, safari for ios. For example, --browser firefox. --selenium-addr &lt;address&gt; (optional) - Selenium or appium network address. For example, --selenium-addr 192.168.0.9:4004. If it is not specified, local selenium server with default options will be started. --device &lt;name&gt; (optional) - Mobile device name. For example, --device &quot;My iPhone&quot; or --device Our_Android. Look for actual value for mobile device in its settings. --os-version &lt;version&gt; (optional) - Mobile OS version. For example, --os-version 9.0.3 or --os-version 5.0.5. --udid &lt;UDID&gt; (optional) - Mobile device UDID. --ios-engine &lt;engineName&gt; (optional) - iOS driver engine name. Default value is XCUITest. --retry &lt;times&gt; (optional) - Number of times to retry a failed test case. --stdout-log (optional) - Print log to console stdout. --allow-uncaught (optional) - Use mochajs processing of uncaught exceptions. × Search results Close "},"tutorial-middleware.html":{"id":"tutorial-middleware.html","title":"Tutorial: How to use own middleware","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions How to use own middleware First please see example how to develop and include own proxy middleware. By default GlaceJS supports 3 middlewares: to gather responses info to manage responses speed to cache and replay responses Your middleware may be registered just adding it to array (see example). Middleware will be used in all supported proxies and executed inside proxy context. If you want to prevent middleware calling after your middleware you should return true inside it. × Search results Close "},"tutorial-reporter.html":{"id":"tutorial-reporter.html","title":"Tutorial: How to use own reporter","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions How to use own reporter GlaceJS supports multiple reporters. And you may register your own reporter. Please see example in order to note full list of supported hooks in reporting. × Search results Close "},"tutorial-uncaught.html":{"id":"tutorial-uncaught.html","title":"Tutorial: Why GlaceJS suppresses uncaught exceptions","body":" GlaseJS Modules lib/clilib/globalslib/indexlib/run Tutorials How to use conftest.jsCommand line argumentsHow to use own middlewareHow to use own reporterWhy GlaceJS suppresses uncaught exceptions Why GlaceJS suppresses uncaught exceptions Uncaught exceptions is really dangerous thing, that may break your mochajs tests queue. Let's consider code example with async calls and uncaught exceptions. /* sample.js */ var sleep = timeout =&gt; { return new Promise(resolve =&gt; { setTimeout(() =&gt; { console.log(`I was sleeping ${timeout} ms`); resolve(); }, timeout); }); }; var error = timeout =&gt; { setTimeout(() =&gt; { throw new Error(&quot;BOOM!!!&quot;); }, timeout); }; describe(&quot;scope&quot;, () =&gt; { it (&quot;test #1&quot;, async () =&gt; { error(1000); await sleep(1000); }); it (&quot;test #2&quot;, async () =&gt; await sleep(1000)); it (&quot;test #3&quot;, async () =&gt; { error(1000); await sleep(1000); }); it (&quot;test #4&quot;, async () =&gt; await sleep(1000)); it (&quot;test #5&quot;, async () =&gt; await sleep(1000)); it (&quot;test #6&quot;, async () =&gt; await sleep(1000)); });Execute it and get something really strange in report: $ mocha sample.js scope 1) test #1 # in console it colored as red (failed) I was sleeping 1000 ms √ test #1 (1012ms) 2) test #3 # in console it colored as red (failed) I was sleeping 1000 ms I was sleeping 1000 ms √ test #4 √ test #4 I was sleeping 1000 ms I was sleeping 1000 ms I was sleeping 1000 ms √ test #6 (1002ms) √ test #6 (1002ms) √ test #6 (1003ms) 6 passing (3s) 2 failing 1) scope test #1: Uncaught Error: BOOM!!! at Timeout.setTimeout [as _onTimeout] (proba.js:12:15) 2) scope test #3: Uncaught Error: BOOM!!! at Timeout.setTimeout [as _onTimeout] (proba.js:12:15) 6 passing (3s) 2 failing 1) scope test #1: Uncaught Error: BOOM!!! at Timeout.setTimeout [as _onTimeout] (proba.js:12:15) 2) scope test #3: Uncaught Error: BOOM!!! at Timeout.setTimeout [as _onTimeout] (proba.js:12:15) 6 passing (3s) 2 failing 1) scope test #1: Uncaught Error: BOOM!!! at Timeout.setTimeout [as _onTimeout] (proba.js:12:15) 2) scope test #3: Uncaught Error: BOOM!!! at Timeout.setTimeout [as _onTimeout] (proba.js:12:15 Pay attention, that test #1 is mentioned twice: as passed and as failed! test #2 &amp; test #5 are absent in report! You may see concurrent printing of messages I was sleeping 1000 ms, 1 time, 2 times, 3 times. Let's see why it happens. The problem, that by default mochajs processes uncaught exceptions: https://github.com/mochajs/mocha/blob/master/lib/runner.js#L698. And if such exception happens, mochajs fails currently executed test. And it doesn't matter whether such exception happens in current test or was born many tests ago (due to unstopped timer, for example). This processing is implemented via listener, and in above example very interesting things happen: In test #1 on one hand uncaught exception happens after 1 second and its processing starts. On the other hand, test #1 waits for sleep finishing 1 second and then mochajs marks it as passed. Due to async of JavaScript, there are two concurrently test #1 processors, that leads to test #1 reporting twice. More over, since there are two places, which emit events to start new test execution. And factically, there are two tests queues. In test #3 previous situation repeats. And there are 3 concurrently executed tests queues! The evidence is a number of printed messages I was sleeping 1000 ms. How to fix Simple and working variant is to suppress uncaught exception. var Mocha = require(&quot;mocha&quot;); Mocha.Runner.prototype.uncaught = function (err) { logger.error(&quot;UNCAUGHT ERROR&quot;, err); };It's better to get one failed test and in test finalizers to close all descriptors, to stop proxies, to kill processes and so on, than to get fully failed tests queue in nightly build. That's why mechanism to suppress uncaught exceptions is enabled by default in GlaceJS. But it may be disabled with option --allow-uncaught. × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
